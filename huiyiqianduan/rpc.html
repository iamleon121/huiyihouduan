<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id = "x1">
			{{x1}}
		</div>
		<script src="js/w3.js"></script>
		<script>
			var t = {"x1":"Leon"}
			//w3.displayHttp("x1", "http://127.0.0.1:8000");
			//w3.http("http://127.0.0.1:8000", readyfunc, xml, method)
			
			var xmlhttp;
			if (window.XMLHttpRequest)
			{
				// IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
				xmlhttp=new XMLHttpRequest();
			}
			else
			{
				// IE6, IE5 浏览器执行代码
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange=function()
			{
				if (xmlhttp.readyState==4 && xmlhttp.status==200)
				{
				var myArr = JSON.parse(this.responseText);
				console.log(myArr)
				}
			}
			xmlhttp.open("POST","http://127.0.0.1:8000/va",true);
			xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			xmlhttp.send(JSON.stringify({ "name": "leon", "price": 21 }));

			w3.http(
    		"http://127.0.0.1:8000/va", // 明确资源路径
			function() {
				if (this.readyState === 4) {
					if (this.status === 200) {
						console.log("响应成功:", JSON.parse(this.responseText));
					} else {
						console.error("错误码:", this.status, "详情:", this.responseText);
					}
				}
			},
			JSON.stringify({ "name": "leon", "price": 21 }), // 序列化数据
			"POST",
			true
			);


		</script>
	</body>
</html>