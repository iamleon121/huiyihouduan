# 会议管理功能开发注意事项规则

## 1. 前后端分离原则

### 1.1 职责划分
- **前端职责**：负责用户界面渲染、数据展示、用户交互和表单验证
- **后端职责**：负责业务逻辑处理、数据持久化、权限验证和资源管理
- **通信方式**：通过RESTful API进行前后端通信，使用JSON作为数据交换格式

### 1.2 代码组织
- 前端代码应放置在`static`目录下，按功能模块组织
- 后端代码应遵循FastAPI项目结构，保持模型、路由和业务逻辑分离
- 避免在前端硬编码后端API路径，应使用配置文件或常量管理

## 2. RESTful API设计规范

### 2.1 URI设计
- 使用名词复数形式表示资源集合（如`/api/meetings/`）
- 使用资源ID标识特定资源（如`/api/meetings/{meeting_id}`）
- 避免在URI中包含动词，应通过HTTP方法表达操作意图

### 2.2 HTTP方法使用
- **GET**：获取资源，不应修改服务器状态
- **POST**：创建新资源
- **PUT**：全量更新资源
- **PATCH**：部分更新资源
- **DELETE**：删除资源

### 2.3 状态码使用
- **200 OK**：请求成功
- **201 Created**：资源创建成功
- **204 No Content**：删除成功等无需返回内容的操作
- **400 Bad Request**：请求参数错误
- **404 Not Found**：资源不存在
- **500 Internal Server Error**：服务器内部错误

### 2.4 响应格式
- 保持响应格式一致性，使用统一的JSON结构
- 错误响应应包含明确的错误代码和描述信息
- 分页响应应包含总数、当前页、每页数量等元数据

## 3. 数据验证策略

### 3.1 前端验证
- 实现基本的表单验证（必填项、格式、长度等）
- 提供即时反馈，优化用户体验
- 使用统一的验证错误提示样式

### 3.2 后端验证
- 使用Pydantic模型进行请求数据验证
- 实现业务规则验证（如会议时间合法性、ID唯一性等）
- 返回明确的验证错误信息，便于前端展示

### 3.3 文件上传验证
- 限制文件类型（仅允许PDF等安全格式）
- 限制文件大小，防止服务器资源耗尽
- 验证文件内容，防止恶意文件上传

## 4. 错误处理机制

### 4.1 前端错误处理
- 捕获并处理API请求错误，提供友好的用户提示
- 实现全局错误处理机制，避免未捕获异常导致应用崩溃
- 在开发环境中保留详细错误信息，生产环境中提供简化信息

### 4.2 后端错误处理
- 使用FastAPI的异常处理机制，统一处理各类异常
- 记录详细错误日志，便于问题排查
- 避免在响应中暴露敏感信息或堆栈跟踪

## 5. 安全性考虑

### 5.1 输入安全
- 实施输入验证和清洁，防止XSS攻击
- 使用参数化查询，防止SQL注入
- 限制上传文件类型和大小，防止文件上传攻击

### 5.2 认证与授权
- 实现基于角色的访问控制（RBAC）
- 验证用户对特定会议的操作权限
- 保护敏感API端点，要求适当的认证

### 5.3 数据保护
- 敏感数据传输使用HTTPS
- 避免在前端存储敏感信息
- 实现适当的会话管理和超时机制

## 6. 性能优化

### 6.1 前端优化
- 最小化HTTP请求数量
- 实现资源懒加载和按需加载
- 优化DOM操作，减少重排和重绘

### 6.2 后端优化
- 实现适当的数据库索引
- 使用缓存减少重复计算
- 优化查询，避免N+1问题

### 6.3 文件处理优化
- 实现文件分块上传，支持大文件处理
- 使用异步处理文件转换任务
- 考虑使用对象存储服务存储文件

## 7. 代码质量与维护

### 7.1 代码风格
- 遵循一致的命名约定（前端使用驼峰命名，后端使用蛇形命名）
- 编写清晰的注释，特别是复杂逻辑部分
- 保持代码模块化，遵循单一职责原则

### 7.2 测试策略
- 编写单元测试验证关键功能
- 实现API集成测试
- 进行前端UI测试确保用户体验

### 7.3 版本控制
- 使用语义化版本控制
- 编写清晰的提交信息
- 保持小批量、频繁提交的习惯

## 8. 响应式设计与可访问性

### 8.1 响应式布局
- 实现移动优先的响应式设计
- 使用相对单位（如rem、%）而非固定像素
- 测试不同设备和屏幕尺寸下的显示效果

### 8.2 可访问性
- 遵循WCAG 2.1标准
- 提供适当的颜色对比度
- 确保键盘导航可用性

## 9. 文档与注释

### 9.1 API文档
- 使用FastAPI的自动文档功能
- 为每个端点提供清晰的描述和参数说明
- 包含请求和响应示例

### 9.2 代码注释
- 为复杂函数和方法添加文档字符串
- 解释非显而易见的业务逻辑
- 标记TODO和FIXME项目

## 10. 特定项目规则

### 10.1 会议ID生成
- 使用有意义的前缀+时间戳格式生成会议ID
- 确保ID在系统中唯一

### 10.2 文件存储结构
- 按会议ID和议程项ID组织文件存储目录
- 使用统一的文件命名约定

### 10.3 状态管理
- 会议状态应限定为预定义的几种状态（未开始、进行中、已结束等）
- 实现适当的状态转换验证逻辑

---

遵循以上规则将确保会议管理功能的开发符合现代前后端设计标准，提高代码质量和可维护性，同时保证良好的用户体验和系统安全性。